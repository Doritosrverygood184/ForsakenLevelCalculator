<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Forsaken Level Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background-color: rgba(211, 211, 211, 0.8);
      font-family: Arial, sans-serif;
      color: #222;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header img.logo {
      width: 200px;
      display: block;
      margin: 0 auto 10px;
    }

    .header .title {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #222;
    }

    label {
      font-family: 'Playfair Display', serif;
      font-weight: normal;
      display: inline-block;
      margin-top: 10px;
    }

    input[type="number"] {
      width: 80px;
      padding: 4px 8px;
      margin-left: 10px;
      margin-right: 20px;
      font-family: Arial, sans-serif;
    }

    button {
      margin-top: 15px;
      padding: 8px 16px;
      font-family: 'Playfair Display', serif;
      cursor: pointer;
    }

    select {
      margin-left: 10px;
      padding: 5px 10px;
      font-family: 'Playfair Display', serif;
      font-size: 16px;
    }

    #characterImage {
      display: block;
      margin: 20px auto;
      max-width: 90%;
      max-height: 50px; /* roughly the same height as xp bar */
      object-fit: contain;
      border: none;
      background: none;
    }

    #xpBarContainer {
      background-color: #444;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      height: 50px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 5px #222;
    }

    #xpBar {
      background-color: #00f0ff;
      height: 100%;
      width: 0%;
      border-radius: 8px 0 0 8px;
      transition: width 0.4s ease;
    }

    #levelText {
      position: absolute;
      width: 100%;
      top: 50%;
      transform: translateY(-50%);
      text-align: center;
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      color: white;
      font-weight: bold;
      text-shadow: 1px 1px 2px #000;
    }

    #result {
      margin-top: 15px;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: bold;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    #statsArea {
      margin-top: 12px;
      font-family: 'Playfair Display', serif;
      font-size: 16px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.4;
    }

    #slateskinStat {
      margin-top: 8px;
      font-style: italic;
      color: #006666;
    }
  </style>
</head>
<body>

  <div class="header">
    <img class="logo" src="https://static.wikia.nocookie.net/6e7bff6d-b97f-49f6-a341-4cf3c08446a8" alt="Forsaken Logo" />
    <div class="title">Level Calculator</div>
  </div>

  <div style="text-align: center;">
    <label for="currentLevel">Current Level:</label>
    <input type="number" id="currentLevel" min="1" max="100" value="1" />
    <label for="wantedLevel">Wanted Level:</label>
    <input type="number" id="wantedLevel" min="1" max="100" value="10" />
  </div>

  <div style="text-align: center; margin-top: 15px;">
    <button id="calculateBtn">Calculate XP</button>
  </div>

  <div style="text-align: center; margin-top: 15px;">
    <label for="characterSelect">Choose Character:</label>
    <select id="characterSelect">
      <option value="none">None</option>
      <option value="noob">Noob</option>
    </select>
  </div>

  <img id="characterImage" src="" alt="" style="display:none;" />

  <div id="xpBarContainer">
    <div id="xpBar"></div>
    <div id="levelText">Level 1</div>
  </div>

  <div id="result"></div>

  <div id="statsArea"></div>

  <script>
    const calculateBtn = document.getElementById('calculateBtn');
    const currentLevelInput = document.getElementById('currentLevel');
    const wantedLevelInput = document.getElementById('wantedLevel');
    const xpBar = document.getElementById('xpBar');
    const levelText = document.getElementById('levelText');
    const resultDiv = document.getElementById('result');
    const statsArea = document.getElementById('statsArea');
    const characterSelect = document.getElementById('characterSelect');
    const characterImage = document.getElementById('characterImage');

    // Sample XP needed per level (could be linear or more complex)
    // Here we assume XP needed for each level is 100 XP * level number (just example)
    function xpForLevel(level) {
      return level * 100;
    }

    function calculateTotalXp(currentLevel, wantedLevel) {
      let totalXp = 0;
      for(let lvl = currentLevel; lvl < wantedLevel; lvl++) {
        totalXp += xpForLevel(lvl);
      }
      return totalXp;
    }

    function updateCharacterImage() {
      const character = characterSelect.value;
      if(character === 'noob') {
        characterImage.src = 'Noob.png'; // Make sure this image is available in your folder or URL
        characterImage.style.display = 'block';
        characterImage.alt = 'Noob Character';
      } else {
        characterImage.src = '';
        characterImage.style.display = 'none';
        characterImage.alt = '';
      }
    }

    characterSelect.addEventListener('change', () => {
      updateCharacterImage();
      // Clear previous calculation results & stats when character changes
      resultDiv.textContent = '';
      statsArea.innerHTML = '';
      xpBar.style.width = '0%';
      levelText.textContent = `Level ${currentLevelInput.value}`;
    });

    calculateBtn.addEventListener('click', () => {
      const currentLevel = parseInt(currentLevelInput.value);
      const wantedLevel = parseInt(wantedLevelInput.value);

      if (isNaN(currentLevel) || isNaN(wantedLevel) || currentLevel < 1 || wantedLevel < 1 || currentLevel >= wantedLevel) {
        alert('Please enter valid levels. Wanted level must be greater than current level and both must be at least 1.');
        return;
      }

      const totalXpNeeded = calculateTotalXp(currentLevel, wantedLevel);

      // Update XP bar width - showing how much XP progress from currentLevel to wantedLevel
      // Let's assume max XP for full bar is xp for wantedLevel
      const maxXp = xpForLevel(wantedLevel);
      const percent = Math.min((totalXpNeeded / maxXp) * 100, 100);
      xpBar.style.width = percent + '%';

      levelText.textContent = `Level ${wantedLevel}`;

      // Show total XP needed
      resultDiv.textContent = `Total XP needed: ${totalXpNeeded}`;

      // Example calculation: Generators you have to do (arbitrary example, say 5 XP per generator)
      const xpPerGenerator = 5;
      const generatorsNeeded = Math.ceil(totalXpNeeded / xpPerGenerator);

      // Show the stats
      let statsHtml = `Generators you have to do: ${generatorsNeeded}`;

      // If character is Noob, add the Slateskin effect calculation:
      if(characterSelect.value === 'noob') {
        // Calculate how many times you need the effect (12 XP each)
        const slateskinNeeded = Math.ceil(totalXpNeeded / 12);
        statsHtml += `<br/><span id="slateskinStat">${slateskinNeeded} times: Slateskin effect ended naturally (12 XP each)</span>`;
      }

      statsArea.innerHTML = statsHtml;
    });

    // Initialize character image on page load
    updateCharacterImage();
  </script>
</body>
</html>
